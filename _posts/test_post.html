---
layout: post
title: ""
date: 
published: true
status: publish
categories: test
analytics : true
comments : true
tags: 
---

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />


<meta name="date" content="2014-05-24" />

<title>test blog post</title>

<script src="../assets/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="../assets/bootstrap-2.3.2/css/spacelab.min.css" rel="stylesheet" />
<link href="../assets/bootstrap-2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
<script src="../assets/bootstrap-2.3.2/js/bootstrap.min.js"></script>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<div class="container">


<div id="header">
<h1 class="title">test blog post</h1>
<h4 class="date"><em>2014-05-24</em></h4>
</div>

<div id="TOC">
<ul>
<li><a href="#simulate-data">Simulate data</a></li>
<li><a href="#plot-it">Plot it</a></li>
<li><a href="#analyze-it">Analyze it</a></li>
</ul>
</div>

<div id="simulate-data" class="section level1">
<h1>Simulate data</h1>
<p>This section shows how to simulate the data. The <code>R Source</code> tab shows the code input into R. The <code>R Output</code> tab shows what the R console displays after running the code.</p>
<p>The structure is as follows:</p>
<ul>
<li>40 participants</li>
<li>2 groups (sp/cat)</li>
<li>3 etm (b, v, vb)</li>
<li>8 items per level of etm</li>
<li>4 repetitions of each item (not included)</li>
</ul>
<p>That gives a total of 960 rows (not counting the repetitions), so that is what we have to simulate. Remember that the dependent variable is no longer binary, the percents represent the proportion of times the participants produced [v].</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># generate 40 participants</span>
participant &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">40</span>
participants &lt;-<span class="st"> </span><span class="kw">rep</span>(participant,<span class="dv">24</span>)
participants &lt;-<span class="st"> </span><span class="kw">sort</span>(participants)

<span class="co"># Assign participants to two groups (cat/sp)</span>
<span class="co"># factor called &#39;bil&#39; (bilingual)</span>
bil &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;cat&quot;</span>, <span class="dv">480</span>),<span class="kw">rep</span>(<span class="st">&quot;sp&quot;</span>, <span class="dv">480</span>))
df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">cbind</span>(participants,bil))

<span class="co"># Create factor etimology (etm)</span>
<span class="co"># 3 levels (b, v, v&gt;b)</span>
df$etm &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;b&quot;</span>, <span class="dv">8</span>), <span class="kw">rep</span>(<span class="st">&quot;v&quot;</span>, <span class="dv">8</span>), <span class="kw">rep</span>(<span class="st">&quot;vb&quot;</span>, <span class="dv">8</span>))
df$etm &lt;-<span class="st"> </span><span class="kw">as.factor</span>(df$etm)

<span class="co"># Create 8 items for each level of &#39;etm&#39;</span>
<span class="co"># Note: items have been repeated 4 times, these averages</span>
<span class="co"># are included here already</span>
df$items &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;b1&quot;</span>,<span class="st">&quot;b2&quot;</span>,<span class="st">&quot;b3&quot;</span>,<span class="st">&quot;b4&quot;</span>,<span class="st">&quot;b5&quot;</span>,<span class="st">&quot;b6&quot;</span>,<span class="st">&quot;b7&quot;</span>,<span class="st">&quot;b8&quot;</span>,
              <span class="st">&quot;v1&quot;</span>,<span class="st">&quot;v2&quot;</span>,<span class="st">&quot;v3&quot;</span>,<span class="st">&quot;v4&quot;</span>,<span class="st">&quot;v5&quot;</span>,<span class="st">&quot;v6&quot;</span>,<span class="st">&quot;v7&quot;</span>,<span class="st">&quot;v8&quot;</span>,
              <span class="st">&quot;vb1&quot;</span>,<span class="st">&quot;vb2&quot;</span>,<span class="st">&quot;vb3&quot;</span>,<span class="st">&quot;vb4&quot;</span>,<span class="st">&quot;vb5&quot;</span>,<span class="st">&quot;vb6&quot;</span>,<span class="st">&quot;vb7&quot;</span>,<span class="st">&quot;vb8&quot;</span>)
df$items &lt;-<span class="st"> </span><span class="kw">as.factor</span>(df$items)

<span class="co"># sort rows of dataframe</span>
df &lt;-<span class="st"> </span>df[<span class="kw">with</span>(df, <span class="kw">order</span>(bil, etm)), ]

<span class="co"># Generate percents (proportion of [v] production)</span>
<span class="kw">set.seed</span>(<span class="dv">1</span>)
propcatb &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">160</span>, <span class="dv">20</span>, <span class="dv">5</span>)
propcatv &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">160</span>,<span class="dv">92</span>, <span class="dv">3</span>)
propcatvb &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">160</span>, <span class="dv">20</span>, <span class="dv">5</span>)
propspb &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">160</span>, <span class="dv">20</span>, <span class="dv">4</span>)
propspv &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">160</span>,<span class="dv">35</span>, <span class="dv">5</span>)
propspvb &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">160</span>, <span class="dv">50</span>, <span class="dv">10</span>)

df$prop &lt;-<span class="st"> </span><span class="kw">c</span>(propcatb, 
             propcatv,
             propcatvb,
             propspb,
             propspv,
             propspvb)

df &lt;-<span class="st"> </span>df[<span class="kw">with</span>(df, <span class="kw">order</span>(participants, bil, etm)), ]</code></pre>
<p>That should do it. We use the <code>summary()</code> command to see if it worked and the <code>structure()</code> command to make sure our factors are indeed factors.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Check data</span>
<span class="kw">summary</span>(df)</code></pre>
<pre><code>##   participants  bil      etm          items          prop      
##  1      : 24   cat:480   b :320   b1     : 40   Min.   : 4.96  
##  10     : 24   sp :480   v :320   b2     : 40   1st Qu.:19.71  
##  11     : 24             vb:320   b3     : 40   Median :27.97  
##  12     : 24                      b4     : 40   Mean   :39.49  
##  13     : 24                      b5     : 40   3rd Qu.:51.60  
##  14     : 24                      b6     : 40   Max.   :99.95  
##  (Other):816                      (Other):720</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df)</code></pre>
<pre><code>## &#39;data.frame&#39;:    960 obs. of  5 variables:
##  $ participants: Factor w/ 40 levels &quot;1&quot;,&quot;10&quot;,&quot;11&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ bil         : Factor w/ 2 levels &quot;cat&quot;,&quot;sp&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ etm         : Factor w/ 3 levels &quot;b&quot;,&quot;v&quot;,&quot;vb&quot;: 1 1 1 1 1 1 1 1 2 2 ...
##  $ items       : Factor w/ 24 levels &quot;b1&quot;,&quot;b2&quot;,&quot;b3&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ prop        : num  16.9 20.9 15.8 28 21.6 ...</code></pre>
<p>Looks good.</p>
<p>Here’s the output on one participant in a pretty table:</p>
<pre class="sourceCode r"><code class="sourceCode r">knitr::<span class="kw">kable</span>(<span class="kw">head</span>(df, <span class="dv">24</span>))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">participants</th>
<th align="left">bil</th>
<th align="left">etm</th>
<th align="left">items</th>
<th align="right">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">b</td>
<td align="left">b1</td>
<td align="right">16.87</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">b</td>
<td align="left">b2</td>
<td align="right">20.92</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">b</td>
<td align="left">b3</td>
<td align="right">15.82</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">b</td>
<td align="left">b4</td>
<td align="right">27.98</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">b</td>
<td align="left">b5</td>
<td align="right">21.65</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">b</td>
<td align="left">b6</td>
<td align="right">15.90</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">b</td>
<td align="left">b7</td>
<td align="right">22.44</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">b</td>
<td align="left">b8</td>
<td align="right">23.69</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">v</td>
<td align="left">v1</td>
<td align="right">93.28</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">v</td>
<td align="left">v2</td>
<td align="right">91.28</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">v</td>
<td align="left">v3</td>
<td align="right">95.18</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">v</td>
<td align="left">v4</td>
<td align="right">94.66</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">v</td>
<td align="left">v5</td>
<td align="right">90.14</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">v</td>
<td align="left">v6</td>
<td align="right">98.62</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">v</td>
<td align="left">v7</td>
<td align="right">91.23</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">v</td>
<td align="left">v8</td>
<td align="right">87.73</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">vb</td>
<td align="left">vb1</td>
<td align="right">26.54</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">vb</td>
<td align="left">vb2</td>
<td align="right">27.49</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">vb</td>
<td align="left">vb3</td>
<td align="right">24.07</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">vb</td>
<td align="left">vb4</td>
<td align="right">10.65</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">vb</td>
<td align="left">vb5</td>
<td align="right">22.41</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">vb</td>
<td align="left">vb6</td>
<td align="right">22.28</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">vb</td>
<td align="left">vb7</td>
<td align="right">18.23</td>
</tr>
<tr class="even">
<td align="left">1</td>
<td align="left">cat</td>
<td align="left">vb</td>
<td align="left">vb8</td>
<td align="right">20.85</td>
</tr>
</tbody>
</table>
</div>
<div id="plot-it" class="section level1">
<h1>Plot it</h1>
<p>This uses the <code>lattice</code> library to create boxplots. Pretty straightforward.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#-----------------------------------------</span>
<span class="co"># plots</span>
<span class="co">#-----------------------------------------</span>

<span class="kw">library</span>(lattice)
<span class="kw">bwplot</span>(prop ~<span class="st"> </span>etm|bil, <span class="dt">data =</span> df, <span class="dt">ylab=</span><span class="st">&quot;% [v]&quot;</span>)</code></pre>
<p><img src="test_post_files/figure-html/unnamed-chunk-4.png" title="plot of chunk unnamed-chunk-4" alt="plot of chunk unnamed-chunk-4" width="672" /></p>
</div>
<div id="analyze-it" class="section level1">
<h1>Analyze it</h1>
<p>“The data were analyzed using a 2 x (3) mixed design ANOVA…”. I also included an analysis using linear mixed effects because I don’t know how the bossman told you to analyze the data. Take your pick. You need to decide on the post-hoc analysis based on your research questions but this should be a good start.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#-----------------------------------------</span>
<span class="co"># analysis</span>
<span class="co">#-----------------------------------------</span>

<span class="co"># 2 x (3) mixed design anova</span>
aov.prop =<span class="st"> </span><span class="kw">aov</span>(prop ~<span class="st"> </span>bil *<span class="st"> </span>etm +<span class="st"> </span><span class="kw">Error</span>(participants/etm), <span class="dt">data=</span>df)
<span class="kw">summary</span>(aov.prop)</code></pre>
<pre><code>## 
## Error: participants
##           Df Sum Sq Mean Sq F value Pr(&gt;F)    
## bil        1  19899   19899     891 &lt;2e-16 ***
## Residuals 38    849      22                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Error: participants:etm
##           Df Sum Sq Mean Sq F value Pr(&gt;F)    
## etm        2 310046  155023    5723 &lt;2e-16 ***
## bil:etm    2 322780  161390    5958 &lt;2e-16 ***
## Residuals 76   2059      27                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Error: Within
##            Df Sum Sq Mean Sq F value Pr(&gt;F)
## Residuals 840  31709    37.7</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get descriptives from ANOVA table</span>
<span class="kw">model.tables</span>(aov.prop, <span class="st">&quot;means&quot;</span>)</code></pre>
<pre><code>## Tables of means
## Grand mean
##       
## 39.49 
## 
##  bil 
## bil
##   cat    sp 
## 44.05 34.94 
## 
##  etm 
## etm
##     b     v    vb 
## 19.96 63.34 35.18 
## 
##  bil:etm 
##      etm
## bil   b     v     vb   
##   cat 20.02 92.25 19.86
##   sp  19.89 34.42 50.51</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Make subset</span>
postb =<span class="st"> </span><span class="kw">subset</span>(df,etm==<span class="st">&quot;b&quot;</span>)
<span class="co"># Make subset</span>
postv =<span class="st"> </span><span class="kw">subset</span>(df,etm==<span class="st">&quot;v&quot;</span>)
<span class="co"># Make subset</span>
postvb =<span class="st"> </span><span class="kw">subset</span>(df,etm==<span class="st">&quot;vb&quot;</span>)


<span class="co"># all models were Bonferroni corrected</span>
<span class="co"># 0.05 / 3 = 0.01 (new alpha level)</span>

<span class="co"># One-way between subjects ANOVA (same as ttest)</span>
<span class="co"># compare cat vs. sp for &#39;b&#39;</span>
aov.postb =<span class="st"> </span><span class="kw">aov</span>(prop ~<span class="st"> </span>bil, <span class="dt">data=</span>postb)
<span class="kw">summary</span>(aov.postb)</code></pre>
<pre><code>##              Df Sum Sq Mean Sq F value Pr(&gt;F)
## bil           1      1    1.44    0.07   0.79
## Residuals   318   6225   19.58</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># One-way between subjects ANOVA</span>
<span class="co"># compare cat vs. sp for &#39;v&#39;</span>
aov.postv =<span class="st"> </span><span class="kw">aov</span>(prop ~<span class="st"> </span>bil, <span class="dt">data=</span>postv)
<span class="kw">summary</span>(aov.postv)</code></pre>
<pre><code>##              Df Sum Sq Mean Sq F value Pr(&gt;F)    
## bil           1 267539  267539   13608 &lt;2e-16 ***
## Residuals   318   6252      20                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># One-way between subjects ANOVA</span>
<span class="co"># compare cat vs. sp for &#39;vb&#39;</span>
aov.postvb =<span class="st"> </span><span class="kw">aov</span>(prop ~<span class="st"> </span>bil, <span class="dt">data=</span>postvb)
<span class="kw">summary</span>(aov.postvb)</code></pre>
<pre><code>##              Df Sum Sq Mean Sq F value Pr(&gt;F)    
## bil           1  75138   75138    1079 &lt;2e-16 ***
## Residuals   318  22139      70                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with --self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
