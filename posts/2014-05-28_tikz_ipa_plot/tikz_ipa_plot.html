<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<!--   
  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="http://jvcasill.github.io">
  <meta name="twitter:title" content="TikzDevice tutorial III: standalone plots">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="http://jvcasill.github.io/images/jvcasill.jpg">
  <meta name="twitter:site" content="@jvcasill">
  <meta name="twitter:creator" content="@jvcasill">
   -->
  
  <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  
    <title>
        Joseph V. Casillas
      </title>
  
    <!-- CSS -->
    <link rel="stylesheet" href="../../libraries/frameworks/lanyon/public/css/poole.css">
    <link rel="stylesheet" href="../../libraries/frameworks/lanyon/public/css/syntax.css">
    <link rel="stylesheet" href="../../libraries/frameworks/lanyon/public/css/lanyon.css">
    <link rel="stylesheet" href="../../libraries/highlighters/highlight.js/css/sunburst.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
    <!-- <link rel='stylesheet' href='//fonts.googleapis.com/css?family=Gentium+Book+Basic|Lato:400' type='text/css'> -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="../../libraries/frameworks/lanyon/public/css/buttons.css">
  
  
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../libraries/frameworks/lanyon/public/praat.png">
    <link rel="shortcut icon" href="../../libraries/frameworks/lanyon/public/favicon_ipa.ico">
  
    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
    <!-- Jquery -->
    <script type="text/javascript" src="../../libraries/frameworks/lanyon/public/js/jquery-1.7.2.min.js"></script>
  
    <!-- Javascript -->
    <script type="text/javascript" src="../../libraries/frameworks/lanyon/public/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../libraries/frameworks/lanyon/public/js/bootstrap-dropdown.js"></script>
    
    <!-- Source: http://developerdrive.developerdrive.netdna-cdn.com/wp-content/uploads/2013/07/scroll-to-top.html 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
  
    <style>
  	.back-to-top {
  		position: fixed;
  		bottom: 2em;
  		right: 5px;
  		text-decoration: none;
  		color: #000000;
  		background-color: rgba(235, 235, 235, 0.80);
  		font-size: 12px;
  		padding: 1em;
  		display: none;
  	}
  
  	.back-to-top:hover {	
  		background-color: rgba(135, 135, 135, 0.50);
  	}	
  	</style>
    -->
  
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
      ga('create', 'UA-49437230-1', 'jvcasillas.com');
      ga('send', 'pageview');
  
    </script>
  </head>  
  

  <body class='theme-base-01 '>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
         styles, `#sidebar-checkbox` for behavior. -->
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
    
    <!-- Toggleable sidebar -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-item">
        <h2>Joseph V. Casillas</h2>
        <p>PhD Student</br>
        University of Arizona</p>
    
    
        <a href="mailto:jvcasill@email.arizona.edu"><span class="mail me" title="email"><img src="../../libraries/frameworks/lanyon/assets/images/icons/mail_white.png" alt="info image" height="30" width="26" style="float:left;"></span></a>
        <a alt="youtube" href="http://www.youtube.com/jvcasill" target='_new'><span class="showtooltip" title="youtube channel"><img src="../../libraries/frameworks/lanyon/assets/images/icons/youtube_white2.png" alt="info image" height="30" width="30" style="float:left;"></span></a>
        <a alt="twitter" href="http://twitter.com/jvcasill/" target='_new'><span class="showtooltip" title="my twitter feed"><img src="../../libraries/frameworks/lanyon/assets/images/icons/twitter_white.png" alt="bird image" height="30" width="30" style="float:left;"></span></a>
        <a alt="facebook" href="http://facebook.com/jvcasill/" target='_new'><span class="showtooltip" title="more info"><img src="../../libraries/frameworks/lanyon/assets/images/icons/fb_white.png" alt="info image" height="30" width="30" style="float:left;"></span></a>
        <a alt="github" href="http://github.com/jvcasill/" target='_new'><span class="showtooltip" title="my code"><img src="../../libraries/frameworks/lanyon/assets/images/icons/github_white2.png" alt="github image" height="30" width="30" style="float:left;"></span></a>
        <a alt="rss" href="http://github.com/jvcasill/" target='_new'><span class="showtooltip" title="rss feed"><img src="../../libraries/frameworks/lanyon/assets/images/icons/rss_white.png" alt="rss image" height="30" width="30" style="float:left;"></span></a></br>
      </div>
    
      <nav class="sidebar-nav">
        <a class="sidebar-nav-item" href="/">
          <i class='fa fa-home'> </i>  home
        </a>
        <!-- <a class="sidebar-nav-item" href="/archive/v.zip">
          <i class='fa fa-download'> </i>  Download
        </a> -->
        <a class="sidebar-nav-item" href="/bio">
      <i class='fa fa-puzzle-piece'> </i>  bio
    </a>
    <a class="sidebar-nav-item" href="/teaching">
      <i class='fa fa-pencil-square'> </i>  teaching
    </a>
    <a class="sidebar-nav-item" href="/research">
      <i class='fa fa-cogs'> </i>  research
    </a>
    <a class="sidebar-nav-item" href="/cv">
      <i class='fa fa-puzzle-piece'> </i>  cv
    </a>
    <a class="sidebar-nav-item" href="/code">
      <i class='fa fa-code'> </i>  code
    </a>
    <a class="sidebar-nav-item" href="/blog">
      <i class='fa fa-archive'> </i>  blog
    </a>
    <!-- <span class="sidebar-nav-item">Currently v</span> -->
      </nav>
    
      <div class="sidebar-item">
        <p>
          &copy; 2014. All rights reserved.
        </p>
      </div>
    </div>    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <h2 class="masthead-title">
            <a href="/" title="Home">Joseph V. Casillas</a>
            <small></small>
<!--             <div style='float:right;'>
            <a href="/blog">
              <i class='fa fa-archive'> </i>
            </a>
            <a href="http://twitter.com/jvcasill">
              <i class='fa fa-twitter'> </i>
            </a>
            <a href="http://github.com/jvcasill">
              <i class='fa fa-github'> </i>
            </a>
            </div> -->
          </h2>
        </div>
      </div>

      <div class="container content">
        <div class="post">
          <h1 class="post-title">TikzDevice tutorial III: standalone plots</h1>
          <span class="post-date">2014-05-27</span>
          
<p>In this post I&#39;m going to show you how to use <code>TikzDevice</code> to create high quality plots that use the same font as your <code>LaTeX</code> document. I&#39;m assuming that you have already installed <code>tikz</code>. If not, see <a href="/posts/2013-05-11_tikz_install/install_tikz_tut.html">part I</a> in this series. Moreover, this tutorial assumes that you have set up your project in the same way outlined in <a href="/posts/2013-05-17_tikz_project/tikz_proj.html">part II</a>. An added benefit to this approach is that it allows you to insert IPA symbols into the plot via the <code>tipa</code> package.  </p>

<h4>The LaTeX file</h4>

<p>Ok. You should start with a <code>LaTeX</code> file that looks like this:</p>

<pre><code>\documentclass{article}
\usepackage{tikz}
\usepackage{tipa}

\begin{document}

&lt;&lt;&gt;&gt;=
require(tikzDevice)
tikz(&#39;plot.tex&#39;, standAlone=TRUE)
library(stats)
plot(cars)
lines(lowess(cars))
dev.off()
@

\end{document}
</code></pre>

<p>If you have experience working with <code>LaTeX</code>, the preamble should be pretty straightforward (If you need a quick primer on <code>LaTeX</code>, see this tutorial). The important part so far is that you have to include <code>\usepackage{tikz}</code> and <code>\usepackage{tipa}</code> <em>before</em> <code>\begin{document}</code>. </p>

<h4>The R code</h4>

<p>In <code>knitr</code>, R code goes between <code>&lt;&lt;&gt;&gt;=</code> and ends with <code>@</code>. So all of this is R code:</p>

<pre><code>require(tikzDevice)
tikz(&#39;plots/cars-plot.tex&#39;, standAlone=TRUE)
library(stats)
plot(cars)
lines(lowess(cars))
dev.off()
</code></pre>

<p>The command <code>require(tikzDevice)</code> loads tikz into the R workspace. Then, <code>tikz(&#39;plots/cars-plot.tex&#39;, standAlone=TRUE)</code> calls the tikz device and creates the file <code>cars-plot.tex</code> in the folder <code>plots</code>. It is important to set <code>standAlone</code> to <code>TRUE</code> if you want to have a separate .tex file (this is what allows us to keep the fonts the same as the rest of the document). From this point on until the call <code>dev.off()</code>, we enter what we want to appear in our .tex file. In this case I have plotted the typical <code>cars</code> data from the library <code>stats</code>. Here is the PDF output produced when <code>cars-plot.tex</code> is compiled. Notice the font is different from what you typical get in R. </p>

<p><img width="100%" src="assets/plot.pdf"></p>

<p>Now let&#39;s try something a little more involved and add some IPA. I will use a fake dataset and load it into R.</p>

<pre><code>my_data &lt;- read.delim(&quot;assets/my_data.txt&quot;)
</code></pre>

<p>We will use ggplot2 for this graph.</p>

<pre><code>library(ggplot2)
</code></pre>

<p>Now we will call tikz device.</p>

<pre><code>require(tikzDevice)
options(tikzLatexPackages = c(getOption(&quot;tikzLatexPackages&quot;), &quot;\\usepackage{tipa}&quot;))
tikz(&#39;plots/ipa_plot.tex&#39;, standAlone=TRUE, width=10, height=6)
my_data$group &lt;- factor(my_data$group, levels = c(&quot;EL&quot;, &quot;NE&quot;, &quot;LL&quot;))
df&lt;-with(my_data, aggregate(fpro, list(group=group, fstim=fstim), mean))
df$se&lt;-with(my_data, aggregate(fpro, list(group=group, fstim=fstim), function(x) sd(x)/sqrt(10)))[,3]
gp &lt;- ggplot(df, aes(x=fstim, y=x, colour=group, ymin=x-se, ymax=x+se))
gp + geom_line(aes(linetype=group), size = .5) + 
    geom_point(aes(shape=group)) + 
    geom_ribbon(alpha = 0.15, linetype=0) + 
    ylim(0, 1) + 
    scale_x_continuous(breaks=seq(0, 10, by=1)) +
    labs(list(title = &quot;[\\textesh ip/\\textesh\\textsci p]&quot;, 
            x = &quot;Stimuli&quot;, y = &quot;\\% [\\textesh\\textsci p]&quot;)) +
    theme_bw() +
    theme(legend.background = element_rect(colour = &#39;grey50&#39;, 
        fill = &#39;grey97&#39;, size = .75, linetype=&#39;solid&#39;)) +
    scale_linetype_discrete(&quot;Group&quot;) +
    scale_shape_discrete(&quot;Group&quot;) +
    scale_colour_discrete(&quot;Group&quot;)
dev.off()
</code></pre>

<p>Notice that after the <code>require(tikzDevice)</code> call, we included </p>

<pre><code>options(tikzLatexPackages = c(getOption(&quot;tikzLatexPackages&quot;), &quot;\\usepackage{tipa}&quot;)) 
</code></pre>

<p>The key component here is <code>\\usepackage{tipa}</code>. This means that tipa will be included in the .tex produced from the code, which, in turn, means that we can include IPA sybold in the plot before it is produced. The <code>tikz(&#39;plots/ipa_plot.tex&#39;, standAlone=TRUE, width=5, height=5)</code> call creates <code>ipa_plot.tex</code> in the folder <code>plots</code>. The rest of the code (up to <code>dev.off()</code>) is the actual plot. Notice that we have included ipa in the following command:</p>

<pre><code>labs(list(title = &quot;[\\textesh ip/\\textesh\\textsci p]&quot;, 
        x = &quot;Stimuli&quot;, y = &quot;\\% [\\textesh\\textsci p]&quot;))
</code></pre>

<p>This is the plot that is produced when the resulting .tex file is compiled:</p>

<p><img width="100%" src="assets/ipa_plot.pdf"></p>

<p>And that&#39;s it. We have produced a beautiful plot that uses the same font as our document and includes IPA symbols. You can download all the files <a href="assets/master.zip">here</a> and try it yourself.</p>

        </div>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'jvcasillas'; // required: replace example with your forum shortname
        
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
               var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
               dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
               (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
           })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>        
      </div>
      <!-- <a href="#" class="back-to-top">Back to Top</a> -->
    </div>
  
  <script type="text/javascript">
    var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '53207fc1e32bb4498d004943');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
  </script>  </body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="../../libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>